- description: |
    MongoDB server status metrics.
  fields:
  - description: |
      Instance version.
    name: version
    path: service.version
    type: alias
  - description: |
      The current MongoDB process. Possible values are mongos or mongod.
    name: process
    path: process.name
    type: alias
  - description: |
      Instance uptime in milliseconds.
    name: uptime.ms
    type: long
  - description: |
      Local time as reported by the MongoDB instance.
    name: local_time
    type: date
  - description: |
      Number of regular assertions produced by the server.
    name: asserts.regular
    type: long
  - description: |
      Number of warning assertions produced by the server.
    name: asserts.warning
    type: long
  - description: |
      Number of msg assertions produced by the server.
    name: asserts.msg
    type: long
  - description: |
      Number of user assertions produced by the server.
    name: asserts.user
    type: long
  - description: |
      Number of rollovers assertions produced by the server.
    name: asserts.rollovers
    type: long
  - description: |
      Data regarding the current status of incoming connections and availability of the database server.
    fields:
    - description: |
        The number of connections to the database server from clients. This number includes the current shell session. Consider the value of `available` to add more context to this datum.
      name: current
      type: long
    - description: |
        The number of unused available incoming connections the database can provide.
      name: available
      type: long
    - description: |
        A count of all incoming connections created to the server. This number includes connections that have since closed.
      name: total_created
      type: long
    name: connections
    type: group
  - description: |
      Platform specific data.
    fields:
    - description: |
        The total size in bytes of heap space used by the database process. Only available on Unix/Linux.
      format: bytes
      name: heap_usage.bytes
      type: long
    - description: |
        The total number of page faults that require disk operations. Page faults refer to operations that require the database server to access data that isn't available in active memory.
      name: page_faults
      type: long
    name: extra_info
    type: group
  - description: |
      Reports on lock state of the database.
    fields:
    - description: |
        The time, in microseconds, since the database last started and created the globalLock. This is roughly equivalent to total server uptime.
      name: total_time.us
      type: long
    - description: |
        The number of operations queued because of a lock.
      fields:
      - description: |
          The total number of operations queued waiting for the lock (i.e., the sum of current_queue.readers and current_queue.writers).
        name: total
        type: long
      - description: |
          The number of operations that are currently queued and waiting for the read lock.
        name: readers
        type: long
      - description: |
          The number of operations that are currently queued and waiting for the write lock.
        name: writers
        type: long
      name: current_queue
      type: group
    - description: |
        The number of connected clients and the read and write operations performed by these clients.
      fields:
      - description: |
          Total number of the active client connections performing read or write operations.
        name: total
        type: long
      - description: |
          The number of the active client connections performing read operations.
        name: readers
        type: long
      - description: |
          The number of the active client connections performing write operations.
        name: writers
        type: long
      name: active_clients
      type: group
    name: global_lock
    type: group
  - description: |
      A document that reports for each lock <type>, data on lock <mode>s. The possible lock <type>s are global, database, collection, metadata and oplog. The possible <mode>s are r, w, R and W which respresent shared, exclusive, intent shared and intent exclusive.
      locks.<type>.acquire.count.<mode> shows the number of times the lock was acquired in the specified mode. locks.<type>.wait.count.<mode> shows the number of times the locks.acquireCount lock acquisitions encountered waits because the locks were held in a conflicting mode. locks.<type>.wait.us.<mode> shows the cumulative wait time in microseconds for the lock acquisitions. locks.<type>.deadlock.count.<mode> shows the number of times the lock acquisitions encountered deadlocks.
    fields:
    - fields:
      - name: acquire.count.r
        type: long
      - name: acquire.count.w
        type: long
      - name: acquire.count.R
        type: long
      - name: acquire.count.W
        type: long
      - name: wait.count.r
        type: long
      - name: wait.count.w
        type: long
      - name: wait.count.R
        type: long
      - name: wait.count.W
        type: long
      - name: wait.us.r
        type: long
      - name: wait.us.w
        type: long
      - name: wait.us.R
        type: long
      - name: wait.us.W
        type: long
      - name: deadlock.count.r
        type: long
      - name: deadlock.count.w
        type: long
      - name: deadlock.count.R
        type: long
      - name: deadlock.count.W
        type: long
      name: global
      type: group
    - fields:
      - name: acquire.count.r
        type: long
      - name: acquire.count.w
        type: long
      - name: acquire.count.R
        type: long
      - name: acquire.count.W
        type: long
      - name: wait.count.r
        type: long
      - name: wait.count.w
        type: long
      - name: wait.count.R
        type: long
      - name: wait.count.W
        type: long
      - name: wait.us.r
        type: long
      - name: wait.us.w
        type: long
      - name: wait.us.R
        type: long
      - name: wait.us.W
        type: long
      - name: deadlock.count.r
        type: long
      - name: deadlock.count.w
        type: long
      - name: deadlock.count.R
        type: long
      - name: deadlock.count.W
        type: long
      name: database
      type: group
    - fields:
      - name: acquire.count.r
        type: long
      - name: acquire.count.w
        type: long
      - name: acquire.count.R
        type: long
      - name: acquire.count.W
        type: long
      - name: wait.count.r
        type: long
      - name: wait.count.w
        type: long
      - name: wait.count.R
        type: long
      - name: wait.count.W
        type: long
      - name: wait.us.r
        type: long
      - name: wait.us.w
        type: long
      - name: wait.us.R
        type: long
      - name: wait.us.W
        type: long
      - name: deadlock.count.r
        type: long
      - name: deadlock.count.w
        type: long
      - name: deadlock.count.R
        type: long
      - name: deadlock.count.W
        type: long
      name: collection
      type: group
    - fields:
      - name: acquire.count.r
        type: long
      - name: acquire.count.w
        type: long
      - name: acquire.count.R
        type: long
      - name: acquire.count.W
        type: long
      - name: wait.count.r
        type: long
      - name: wait.count.w
        type: long
      - name: wait.count.R
        type: long
      - name: wait.count.W
        type: long
      - name: wait.us.r
        type: long
      - name: wait.us.w
        type: long
      - name: wait.us.R
        type: long
      - name: wait.us.W
        type: long
      - name: deadlock.count.r
        type: long
      - name: deadlock.count.w
        type: long
      - name: deadlock.count.R
        type: long
      - name: deadlock.count.W
        type: long
      name: meta_data
      type: group
    - fields:
      - name: acquire.count.r
        type: long
      - name: acquire.count.w
        type: long
      - name: acquire.count.R
        type: long
      - name: acquire.count.W
        type: long
      - name: wait.count.r
        type: long
      - name: wait.count.w
        type: long
      - name: wait.count.R
        type: long
      - name: wait.count.W
        type: long
      - name: wait.us.r
        type: long
      - name: wait.us.w
        type: long
      - name: wait.us.R
        type: long
      - name: wait.us.W
        type: long
      - name: deadlock.count.r
        type: long
      - name: deadlock.count.w
        type: long
      - name: deadlock.count.R
        type: long
      - name: deadlock.count.W
        type: long
      name: oplog
      type: group
    name: locks
    type: group
  - description: |
      Platform specific data.
    fields:
    - description: |
        The amount of network traffic, in bytes, received by this database.
      format: bytes
      name: in.bytes
      type: long
    - description: |
        The amount of network traffic, in bytes, sent from this database.
      format: bytes
      name: out.bytes
      type: long
    - description: |
        The total number of requests received by the server.
      name: requests
      type: long
    name: network
    type: group
  - description: |
      Operation latencies for the database as a whole. Only mongod instances report this metric.
    fields:
    - description: |
        Total combined latency in microseconds.
      name: reads.latency
      type: long
    - description: |
        Total number of read operations performed on the collection since startup.
      name: reads.count
      type: long
    - description: |
        Total combined latency in microseconds.
      name: writes.latency
      type: long
    - description: |
        Total number of write operations performed on the collection since startup.
      name: writes.count
      type: long
    - description: |
        Total combined latency in microseconds.
      name: commands.latency
      type: long
    - description: |
        Total number of commands performed on the collection since startup.
      name: commands.count
      type: long
    name: ops.latencies
    type: group
  - description: |
      An overview of database operations by type.
    fields:
    - description: |
        The total number of insert operations received since the mongod instance last started.
      name: insert
      type: long
    - description: |
        The total number of queries received since the mongod instance last started.
      name: query
      type: long
    - description: |
        The total number of update operations received since the mongod instance last started.
      name: update
      type: long
    - description: |
        The total number of delete operations received since the mongod instance last started.
      name: delete
      type: long
    - description: |
        The total number of getmore operations received since the mongod instance last started.
      name: getmore
      type: long
    - description: |
        The total number of commands issued to the database since the mongod instance last started.
      name: command
      type: long
    name: ops.counters
    type: group
  - description: |
      An overview of database replication operations by type.
    fields:
    - description: |
        The total number of replicated insert operations received since the mongod instance last started.
      name: insert
      type: long
    - description: |
        The total number of replicated queries received since the mongod instance last started.
      name: query
      type: long
    - description: |
        The total number of replicated update operations received since the mongod instance last started.
      name: update
      type: long
    - description: |
        The total number of replicated delete operations received since the mongod instance last started.
      name: delete
      type: long
    - description: |
        The total number of replicated getmore operations received since the mongod instance last started.
      name: getmore
      type: long
    - description: |
        The total number of replicated commands issued to the database since the mongod instance last started.
      name: command
      type: long
    name: ops.replicated
    type: group
  - description: |
      Data about the current memory usage of the mongod server.
    fields:
    - description: |
        Either 64 or 32, depending on which target architecture was specified during the mongod compilation process.
      name: bits
      type: long
    - description: |
        The amount of RAM, in megabytes (MB), currently used by the database process.
      name: resident.mb
      type: long
    - description: |
        The amount, in megabytes (MB), of virtual memory used by the mongod process.
      name: virtual.mb
      type: long
    - description: |
        The amount of mapped memory, in megabytes (MB), used by the database. Because MongoDB uses memory-mapped files, this value is likely to be to be roughly equivalent to the total size of your database or databases.
      name: mapped.mb
      type: long
    - description: |
        The amount of mapped memory, in megabytes (MB), including the memory used for journaling.
      name: mapped_with_journal.mb
      type: long
    name: memory
    type: group
  - description: |
      True when there are operations from a mongos instance queued for retrying.
    name: write_backs_queued
    type: boolean
  - description: |
      A string that represents the name of the current storage engine.
    name: storage_engine.name
    type: keyword
  - description: |
      Statistics about the WiredTiger storage engine.
    fields:
    - description: |
        Statistics about the transactions currently in progress.
      fields:
      - description: |
          Number of concurrent write transaction in progress.
        name: write.out
        type: long
      - description: |
          Number of concurrent write tickets available.
        name: write.available
        type: long
      - description: |
          Number of total write tickets.
        name: write.total_tickets
        type: long
      - description: |
          Number of concurrent read transaction in progress.
        name: read.out
        type: long
      - description: |
          Number of concurrent read tickets available.
        name: read.available
        type: long
      - description: |
          Number of total read tickets.
        name: read.total_tickets
        type: long
      name: concurrent_transactions
      type: group
    - description: |
        Statistics about the cache and page evictions from the cache.
      fields:
      - description: |
          Maximum cache size.
        format: bytes
        name: maximum.bytes
        type: long
      - description: |
          Size in byte of the data currently in cache.
        format: bytes
        name: used.bytes
        type: long
      - description: |
          Size in bytes of the dirty data in the cache.
        format: bytes
        name: dirty.bytes
        type: long
      - description: |
          Number of pages read into the cache.
        name: pages.read
        type: long
      - description: |
          Number of pages written from the cache.
        name: pages.write
        type: long
      - description: |
          Number of pages evicted from the cache.
        name: pages.evicted
        type: long
      name: cache
      type: group
    - description: |
        Statistics about the write ahead log used by WiredTiger.
      fields:
      - description: |
          Total log size in bytes.
        format: bytes
        name: size.bytes
        type: long
      - description: |
          Number of bytes written into the log.
        format: bytes
        name: write.bytes
        type: long
      - description: |
          Maximum file size.
        format: bytes
        name: max_file_size.bytes
        type: long
      - description: |
          Number of flush operations.
        name: flushes
        type: long
      - description: |
          Number of write operations.
        name: writes
        type: long
      - description: |
          Number of scan operations.
        name: scans
        type: long
      - description: |
          Number of sync operations.
        name: syncs
        type: long
      name: log
      type: group
    name: wired_tiger
    type: group
  - description: |
      Data about the process MongoDB uses to write data to disk. This data is only available for instances that use the MMAPv1 storage engine.
    fields:
    - description: |
        A counter that collects the number of times the database has flushed all writes to disk.
      name: flushes
      type: long
    - description: |
        The total number of milliseconds (ms) that the mongod processes have spent writing (i.e. flushing) data to disk. Because this is an absolute value, consider the value of `flushes` and `average_ms` to provide better context for this datum.
      name: total.ms
      type: long
    - description: |
        The average time spent flushing to disk per flush event.
      name: average.ms
      type: long
    - description: |
        The amount of time, in milliseconds, that the last flush operation took to complete.
      name: last.ms
      type: long
    - description: |
        A timestamp of the last completed flush operation.
      name: last_finished
      type: date
    name: background_flushing
    type: group
  - description: |
      Data about the journaling-related operations and performance. Journaling information only appears for mongod instances that use the MMAPv1 storage engine and have journaling enabled.
    fields:
    - description: |
        The number of transactions written to the journal during the last journal group commit interval.
      name: commits
      type: long
    - description: |
        The amount of data in megabytes (MB) written to journal during the last journal group commit interval.
      name: journaled.mb
      type: long
    - description: |
        The amount of data in megabytes (MB) written from journal to the data files during the last journal group commit interval.
      name: write_to_data_files.mb
      type: long
    - description: |
        The compression ratio of the data written to the journal.
      name: compression
      type: long
    - description: |
        Count of the commits that occurred while a write lock was held. Commits in a write lock indicate a MongoDB node under a heavy write load and call for further diagnosis.
      name: commits_in_write_lock
      type: long
    - description: |
        The number of times MongoDB requested a commit before the scheduled journal group commit interval.
      name: early_commits
      type: long
    - description: |
        Information about the performance of the mongod instance during the various phases of journaling in the last journal group commit interval.
      fields:
      - description: |
          The amount of time over which MongoDB collected the times data. Use this field to provide context to the other times field values.
        name: dt.ms
        type: long
      - description: |
          The amount of time spent preparing to write to the journal. Smaller values indicate better journal performance.
        name: prep_log_buffer.ms
        type: long
      - description: |
          The amount of time spent actually writing to the journal. File system speeds and device interfaces can affect performance.
        name: write_to_journal.ms
        type: long
      - description: |
          The amount of time spent writing to data files after journaling. File system speeds and device interfaces can affect performance.
        name: write_to_data_files.ms
        type: long
      - description: |
          The amount of time spent remapping copy-on-write memory mapped views. Smaller values indicate better journal performance.
        name: remap_private_view.ms
        type: long
      - description: |
          The amount of time spent for commits.
        name: commits.ms
        type: long
      - description: |
          The amount of time spent for commits that occurred while a write lock was held.
        name: commits_in_write_lock.ms
        type: long
      name: times
      type: group
    name: journaling
    type: group
  name: mongodb.status
  release: ga
  type: group
