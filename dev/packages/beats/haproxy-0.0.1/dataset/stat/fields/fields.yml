- description: |
    Stats collected from HAProxy processes.
  fields:
  - description: |
      Status (UP, DOWN, NOLB, MAINT, or MAINT(via)...).
    name: status
    type: keyword
  - description: |
      Total weight (for backends), or server weight (for servers).
    name: weight
    type: long
  - description: |
      Total downtime (in seconds). For backends, this value is the downtime for the whole backend, not the sum of the downtime for the servers.
    name: downtime
    type: long
  - description: |
      Component type (0=frontend, 1=backend, 2=server, or 3=socket/listener).
    name: component_type
    type: integer
  - description: |
      Process ID (0 for first instance, 1 for second, and so on).
    migration: true
    name: process_id
    path: process.pid
    type: alias
  - description: |
      Service name (FRONTEND for frontend, BACKEND for backend, or any name for server/listener).
    name: service_name
    type: keyword
  - description: |
      Bytes in.
    format: bytes
    name: in.bytes
    type: long
  - description: |
      Bytes out.
    format: bytes
    name: out.bytes
    type: long
  - description: |
      Number of seconds since the last UP->DOWN or DOWN->UP transition.
    name: last_change
    type: integer
  - description: |
      Current throttle percentage for the server when slowstart is active, or no value if slowstart is inactive.
    format: percent
    name: throttle.pct
    type: scaled_float
  - description: |
      Total number of times a server was selected, either for new sessions, or when re-dispatching. For servers, this field reports the the number of times the server was selected.
    name: selected.total
    type: long
  - description: |
      ID of the proxy/server if tracking is enabled.
    name: tracked.id
    type: long
  - fields:
    - description: |
        Cumulative number of connections.
      name: total
      type: long
    - description: |
        Number of times a connection to a server was retried.
      name: retried
      type: long
    - description: |
        Average connect time in ms over the last 1024 requests.
      name: time.avg
      type: long
    name: connection
    type: group
  - fields:
    - description: |
        Requests denied because of security concerns.

          * For TCP this is because of a matched tcp-request content rule.
          * For HTTP this is because of a matched http-request or tarpit rule.
      name: denied
      type: long
    - description: |
        Current queued requests. For backends, this field reports the number of requests queued without a server assigned.
      name: queued.current
      type: long
    - description: |
        Maximum value of queued.current.
      name: queued.max
      type: long
    - description: |
        Request errors. Some of the possible causes are:

          * early termination from the client, before the request has been sent
          * read error from the client
          * client timeout
          * client closed connection
          * various bad requests from the client.
          * request was tarpitted.
      name: errors
      type: long
    - description: |
        Number of times a request was redispatched to another server. For servers, this field reports the number of times the server was switched away from.
      name: redispatched
      type: long
    - description: |
        Number of requests that encountered an error trying to connect to a server. For backends, this field reports the sum of the stat for all backend servers, plus any connection errors not associated with a particular server (such as the backend having no active servers).
      name: connection.errors
      type: long
    - description: ""
      fields:
      - description: |
          Number of HTTP requests per second over the last elapsed second.
        name: value
        type: long
      - description: |
          Maximum number of HTTP requests per second.
        name: max
        type: long
      name: rate
      type: group
    - description: |
        Total number of HTTP requests received.
      name: total
      type: long
    name: request
    type: group
  - fields:
    - description: |
        Number of response errors. This value includes the number of data transfers aborted by the server (haproxy.stat.server.aborted). Some other errors are:
        * write errors on the client socket (won't be counted for the server stat) * failure applying filters to the response
      name: errors
      type: long
    - description: |
        Average response time in ms over the last 1024 requests (0 for TCP).
      name: time.avg
      type: long
    - description: |
        Responses denied because of security concerns. For HTTP this is because of a matched http-request rule, or "option checkcache".
      name: denied
      type: integer
    - description: ""
      fields:
      - description: |
          HTTP responses with 1xx code.
        name: 1xx
        type: long
      - description: |
          HTTP responses with 2xx code.
        name: 2xx
        type: long
      - description: |
          HTTP responses with 3xx code.
        name: 3xx
        type: long
      - description: |
          HTTP responses with 4xx code.
        name: 4xx
        type: long
      - description: |
          HTTP responses with 5xx code.
        name: 5xx
        type: long
      - description: |
          HTTP responses with other codes (protocol error).
        name: other
        type: long
      name: http
      type: group
    name: response
    type: group
  - fields:
    - description: |
        Number of current sessions.
      name: current
      type: long
    - description: |
        Maximum number of sessions.
      name: max
      type: long
    - description: |
        Configured session limit.
      name: limit
      type: long
    - fields:
      - description: |
          Number of sessions per second over the last elapsed second.
        name: value
        type: integer
      - description: |
          Configured limit on new sessions per second.
        name: limit
        type: integer
      - description: |
          Maximum number of new sessions per second.
        name: max
        type: integer
      name: rate
      type: group
    name: session
    type: group
  - description: ""
    fields:
    - description: |
        Status of the last health check. One of:

          UNK     -> unknown
          INI     -> initializing
          SOCKERR -> socket error
          L4OK    -> check passed on layer 4, no upper layers testing enabled
          L4TOUT  -> layer 1-4 timeout
          L4CON   -> layer 1-4 connection problem, for example
                    "Connection refused" (tcp rst) or "No route to host" (icmp)
          L6OK    -> check passed on layer 6
          L6TOUT  -> layer 6 (SSL) timeout
          L6RSP   -> layer 6 invalid response - protocol error
          L7OK    -> check passed on layer 7
          L7OKC   -> check conditionally passed on layer 7, for example 404 with
                    disable-on-404
          L7TOUT  -> layer 7 (HTTP/SMTP) timeout
          L7RSP   -> layer 7 invalid response - protocol error
          L7STS   -> layer 7 response error, for example HTTP 5xx
      name: status
      type: keyword
    - description: |
        Layer 5-7 code, if available.
      name: code
      type: long
    - description: |
        Time in ms that it took to finish the last health check.
      name: duration
      type: long
    - description: |
        The result of the last health check.
      name: health.last
      type: keyword
    - description: |
        Number of failed checks.
      name: health.fail
      type: long
    - description: ""
      name: agent.last
      type: integer
    - description: |
        Number of checks that failed while the server was up.
      name: failed
      type: long
    - description: |
        Number of UP->DOWN transitions. For backends, this value is the number of transitions to the whole backend being down, rather than the sum of the transitions for each server.
      name: down
      type: long
    name: check
    type: group
  - description: |
      Number of data transfers aborted by the client.
    name: client.aborted
    type: integer
  - description: ""
    fields:
    - description: |
        Server ID (unique inside a proxy).
      name: id
      type: integer
    - description: |
        Number of data transfers aborted by the server. This value is included in haproxy.stat.response.errors.
      name: aborted
      type: integer
    - description: |
        Number of backend servers that are active, meaning that they are healthy and can receive requests from the load balancer.
      name: active
      type: integer
    - description: |
        Number of backend servers that are backup servers.
      name: backup
      type: integer
    name: server
    type: group
  - description: ""
    fields:
    - description: |
        Number of HTTP response bytes fed to the compressor.
      format: bytes
      name: in.bytes
      type: long
    - description: |
        Number of HTTP response bytes emitted by the compressor.
      format: bytes
      name: out.bytes
      type: integer
    - description: |
        Number of bytes that bypassed the HTTP compressor (CPU/BW limit).
      format: bytes
      name: bypassed.bytes
      type: long
    - description: |
        Number of HTTP responses that were compressed.
      format: bytes
      name: response.bytes
      type: long
    name: compressor
    type: group
  - description: ""
    fields:
    - description: |
        Unique proxy ID.
      name: id
      type: integer
    - description: |
        Proxy name.
      name: name
      type: keyword
    name: proxy
    type: group
  - description: ""
    fields:
    - description: |
        Configured queue limit (maxqueue) for the server, or nothing if the value of maxqueue is 0 (meaning no limit).
      name: limit
      type: integer
    - description: |
        The average queue time in ms over the last 1024 requests.
      name: time.avg
      type: integer
    name: queue
    type: group
  name: haproxy.stat
  release: ga
  type: group
